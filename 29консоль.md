ГЛАВА 29  Работа с консолью 29.1. Теория Стандартный поток ввода java.lang.System.in, стандартный поток вывода java.lang.System.out, стандартный поток ошибок java.lang.System.err — все эти потоки по умолчанию обычно работают с консолью, но в некоторых случаях могут быть связаны с файлом или еще чем-нибудь. Потоки java.lang.System.out и java.lang.System.err являются экземплярами класса java.io.PrintStream. Входной поток java.lang.System.in является экземпляром java.io.InputStream. Мы уже рас-сматривали все эти классы и видели примеры их использования. 
Методы чтения из консоли возвращают null, если был достигнут конец потока вво-да, например ввод Ctrl+D в Unix или Ctrl+Z в Windows. Последующие операции   Класс java.io.Console содержит методы для доступа к консоли, если есть консоль, связанная с текущей виртуальной машиной. 
Имеет ли виртуальная машина консоль или нет, зависит от платформы и способа запуска виртуальной машины. Если виртуальная машина запущена со стандартной интерактивной консоли без перенаправления стандартных потоков ввода и вывода, то консоль есть, и обычно она связана с клавиатурой и экраном, из которого запу-щена виртуальная машина. Если виртуальная машина была запущена автоматиче-ски, например как фоновый процесс, то обычно она не имеет консоли. 
Если виртуальная машина имеет консоль, то может быть получен уникальный экземпляр этого класса с помощью вызова java.lang.System.console(). Если нет доступной консоли, то метод вернет null. 
ПРИМЕЧАНИЕ При запуске в IDE метод java.lang.System.console() возвращает null. Примеры, использующие его, нужно запускать из консоли самой ОС, а не из IDE. 
Операции ввода и вывода синхронизированы, чтобы гарантировать атомарное выполнение критических операций, поэтому вызов методов readLine(), readPassword(), format(), printf(), а также операции чтения, форматирования и записи из объектов, возвращенных из reader() и writer(), могут привести к блоки-ровке при многопоточности. 
Вызов close() для объектов, возвращенных из reader() и writer(), не закрывает поток этих объектов. 
Глава 29. Работа с консолью 337 чтения будут успешны, если в консоль позже были введены дополнительные сим-волы. 
Если приложению нужно считать пароль или любую другую секретную информа-цию, то оно должно использовать readPassword() или readPassword(String, Object..), а затем после обработки вручную забить пробелами считанный пароль, чтобы минимизировать время пребывания секретных данных в памяти. 
ReadPassword.java package ru.urvanov.javaindynamics2022.console; 
 import java.io.Console; 
 // Этот код запускать нужно НЕ из IDE. // Иначе System.console будет возвращать null public class ReadPassword {  public static void main(String[] args) {  Console cons; 
 char[] passwd; 
 if ((cons = System.console()) != null &&  (passwd = cons.readPassword(  "[%s]", "Password:")) != null) {  // ... 
 java.util.Arrays.fill(passwd, ' '); 
 }  } }  Подробнее про очистку паролей из памяти после использования можно прочесть в статье на моем сайте: https://urvanov.ru/2019/02/06/remove-password-from-memory-in-java-after-using/. 
Полезные методы класса java.io.Console: 
public void flush() Принудительно очищает буферы, выводя содержащуюся в них информацию на экран. 
 public Console format(String fmt,  Object... args) Форматированный вывод в консоль. Смотрите описание java.util.Formatter в гла-ве 28 "Форматирование и парсинг". 
 public Console printf(String format,  Object... args) Форматированный вывод в консоль. Смотрите описание java.util.Formatter в гла-ве 28 "Форматирование и парсинг". 
338 Глава 29. Работа с консолью public Reader reader() Возвращает java.io.Reader, связанный с консолью. Смотрите описание в главе 20 "Потоки ввода/вывода". 
 public String readLine() Читает одну строку текста из консоли. 
 public String readLine(String fmt,  Object... args) Выводит форматированную строку в консоль, а затем считывает одну строку вве-денного пользователем текста. 
 public char[] readPassword() Используется для считывания паролей из консоли. Не отображает вводимые поль-зователем символы. Обратите внимание, что возвращается массив char-ов, это сде-лано специально из соображений безопасности.  public char[] readPassword(String fmt,  Object... args) Выводит форматированную строку, а затем считывает пароль с экрана. Не отобра-жает вводимые пользователем символы. 
 public PrintWriter writer() Возвращает java.io.PrintWriter, связанный с этой консолью. Смотрите описание java.io.PrintWriter в главе 20 "Потоки ввода/вывода". 
 29.2. Задание Создайте программу, хранящую список логинов, паролей и дат рождения в масси-ве. При запуске программа должна запрашивать логин и пароль, а в случае успеш-ного ввода выводить в консоль дату рождения и возраст.