## ГЛАВА 25 Регулярные выражения

### 25.1. Теория

В Java классы, связанные с регулярными выражениями, находятся в пакете `java.util.regex`. Три самых основных класса:

- **java.util.regex.Pattern** — скомпилированное представление регулярного выражения. Не имеет публичных конструкторов; для создания нужно использовать один из его фабричных методов `compile`.
- **java.util.regex.Matcher** — интерпретирует шаблон регулярного выражения и осуществляет сравнение с исходной строкой. У него нет публичных конструкторов; для создания нужно использовать метод `matcher` класса `Pattern`.
- **java.util.regex.PatternSyntaxException** — непроверяемое исключение, которое возникает при наличии синтаксической ошибки в регулярном выражении.

Регулярные выражения — это сложная и обширная тема, но они редко используются в полную силу. В этой главе будет дано общее представление об использовании регулярных выражений, которого будет более чем достаточно в большинстве случаев.

В простейшем случае проверка строк по регулярному выражению происходит следующим образом:

```java
package ru.urvanov.javaindynamics2022.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

// Простой пример использования регулярного выражения
public class SimpleRegex {
    public static void main(String[] args) {
        Pattern pattern = Pattern.compile("\\d\\d [a-zA-Z]{2}");
        Matcher matcher1 = pattern.matcher("12 df");
        if (matcher1.matches()) {
            System.out.println("first matches");
        }
        Matcher matcher2 = pattern.matcher("89 33");
        if (matcher2.matches()) {
            System.out.println("second matches");
        }
    }
}
```

При запуске эта программа выведет в консоль: `first matches`.

В приведенной программе мы сначала создаем объект `Pattern`, который содержит скомпилированное регулярное выражение, а затем проверяем строки на совпадение с ним, получая объекты `Matcher` для каждой строки.

Основной интерес представляет строка в вызове метода `Pattern.compile`, которая содержит само регулярное выражение. Сначала мы используем предопределенный класс символов `\d`, который означает любую цифру [0–9]. Обратную косую черту приходится указывать дважды, чтобы в регулярное выражение попала одна косая черта, так как символ обратной косой черты имеет специальное значение в строках Java.

Существуют и другие предопределенные классы символов:

- `.` — любой символ.
- `\d` — цифра [0–9].
- `\D` — не цифра [^0–9].
- `\s` — пробельный символ [ \t\n\x0B\f\r].
- `\S` — непробельный символ.
- `\w` — любая буква английского алфавита, символ подчеркивания или цифра.
- `\W` — несловарный символ (не совпадающий с \w символ).

Затем регулярное выражение содержит пробел, после него мы объявляем свой класс символов, который может совпадать с любой буквой английского алфавита от a до z и от A до Z. Можно перечислять конкретные символы, а не диапазоны; например, `[duh]` будет соответствовать любому символу из d, u или h.

Число 2 в фигурных скобках указывает, что предыдущий класс символов должен содержаться в результирующей строке 2 раза. Можно писать ограничения:

- `{2,}` — больше двух.
- `{2,5}` — от двух до пяти.

### 25.2. Задания

1. Создайте класс для проверки формата номера телефона России.
2. Создайте класс для проверки e-mail (ограничьтесь только английскими буквами и символом "собака", сам формат e-mail очень сложен и проверке регулярными выражениями практически не поддается).
3. Создайте класс для проверки формата СНИЛС (формат "ччч-ччч-ччч чч").
4. Создайте класс для проверки правильности серии и номера паспорта.
5. Создайте класс для проверки правильности ИНН человека (последовательность из 12 цифр).

